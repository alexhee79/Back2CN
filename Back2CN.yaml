# BacktoCN
port: 7890
socks-port: 7891
allow-lan: true
mode: Rule
log-level: info
external-controller: 127.0.0.1:9090

proxies:

proxy-groups:
  - name: ğŸš€ PROXY
    type: select
    use:
     - P1
     - P2
  - name: ğŸ”„ AUTOMATIC
    type: url-test
    url: 'https://www.xiaomi.cn'
    interval: 300
    tolerance: 100
    use:
     - P1
     - P2
  - name: âš–ï¸ LOAD BALANCE
    type: load-balance
    url: 'https://www.xiaomi.cn'
    interval: 300
    strategy: round-robin
    use:
      - P1
      - P2
  - name: â¤ï¸ XIAOMI
    type: select
    proxies:
      - ğŸ”„ AUTOMATIC
      - âš–ï¸ LOAD BALANCE
      - ğŸš€ PROXY
      - DIRECT
  - name: â™ˆ TUYA
    type: select
    proxies:
      - ğŸ”„ AUTOMATIC
      - âš–ï¸ LOAD BALANCE
      - ğŸš€ PROXY
      - DIRECT
  - name: ğŸ§ CHINA-MUSIC
    type: select
    proxies:
      - ğŸ”„ AUTOMATIC
      - âš–ï¸ LOAD BALANCE
      - ğŸš€ PROXY
      - DIRECT
   - name: ğŸ…°ï¸ ALIBABA
    type: select
    proxies:
      - ğŸ”„ AUTOMATIC
      - âš–ï¸ LOAD BALANCE
      - ğŸš€ PROXY
      - DIRECT
  - name: ğŸ‡¨ğŸ‡³ CHINA-IP
    type: select
    proxies: 
      - ğŸ”„ AUTOMATIC
      - âš–ï¸ LOAD BALANCE
      - ğŸš€ PROXY
      - DIRECT
  - name: ğŸ›‘ ADBLOCK
    type: select
    proxies: 
      - DIRECT
      - REJECT
      
proxy-providers:
  P1:
    type: http
    url: "https://suo.yt/DO1FmQV"
    path: ./provider.yaml
    interval: 3600
    health-check:
      enable: true
      interval: 300
      url: https://www.xiaomi.cn
  P2:
    type: http
    url: "https://proxy.yiun.xyz/clash/proxies?c=CN"
    path: proxy.yiun.xyz/provider-cn.yaml
    interval: 3600
    health-check:
      enable: true
      interval: 300
      url: https://www.xiaomi.cn
      
rule-providers:
  ADBlock:
    behavior: "classical"
    type: http
    url: https://raw.githubusercontent.com/alexhee79/Back2CN/main/ADBlock.yaml
    interval: 3600
    path: ./ADBlock.yaml

rules:
  #GENERAL RULES  
  - DOMAIN-SUFFIX,smtp,DIRECT
  - DOMAIN-SUFFIX,pop,DIRECT
  - DOMAIN-SUFFIX,imap,DIRECT
  - DOMAIN-KEYWORD,aria2,DIRECT
  - DOMAIN-SUFFIX,local,DIRECT
  - RULE-SET,ADBlock,ğŸ›‘ ADBLOCK
  - IP-CIDR,192.168.0.0/16,DIRECT,no-resolve
  - IP-CIDR,192.9.0.0/16,DIRECT,no-resolve
  - IP-CIDR,192.10.0.0/16,DIRECT,no-resolve
  - IP-CIDR,10.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,172.16.0.0/12,DIRECT,no-resolve
  - IP-CIDR,127.0.0.0/8,DIRECT,no-resolve
  - IP-CIDR,100.64.0.0/10,DIRECT,no-resolve

  # XIAOMI
  - DOMAIN-KEYWORD,xiaomi,â¤ï¸ XIAOMI
  - DOMAIN-KEYWORD,mijia,â¤ï¸ XIAOMI
  - DOMAIN-SUFFIX,mi.com,â¤ï¸ XIAOMI
  - DOMAIN-SUFFIX,xiaomi.com,â¤ï¸ XIAOMI
  - DOMAIN-SUFFIX,xiaomi.net,â¤ï¸ XIAOMI
  - DOMAIN-SUFFIX,xiaomi.cn,â¤ï¸ XIAOMI
  - DOMAIN-SUFFIX,xiaomicp.com,â¤ï¸ XIAOMI
  - DOMAIN-SUFFIX,miwifi.com,â¤ï¸ XIAOMI
  - DOMAIN-SUFFIX,iotcplatform.com,â¤ï¸ XIAOMI
 
  #TUYA
  - DOMAIN-KEYWORD,tuya,â™ˆ TUYA
  - DOMAIN-KEYWORD,tuyacn,â™ˆ TUYA
  - DOMAIN-KEYWORD,162.14.14.134,â™ˆ TUYA
  
  # CHINA-MUSIC
  - DOMAIN-SUFFIX,music.126.net,ğŸ§ CHINA-MUSIC
  - DOMAIN-SUFFIX,music.126.com,ğŸ§ CHINA-MUSIC
  - DOMAIN-SUFFIX,music.163.com,ğŸ§ CHINA-MUSIC
  - DOMAIN-SUFFIX,netease.com,ğŸ§ CHINA-MUSIC
  - DOMAIN-SUFFIX,music.qq.com,ğŸ§ CHINA-MUSIC
  - DOMAIN-SUFFIX,qq.com,ğŸ§ CHINA-MUSIC
  
  #ALIBABA
  - IP-CIDR,8.208.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.209.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.210.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.211.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.212.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.213.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.214.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.215.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.216.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.217.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.218.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.219.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.220.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.221.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.222.0.0/16,ğŸ…°ï¸ ALIBABA
  - IP-CIDR,8.223.0.0/16,ğŸ…°ï¸ ALIBABA
  
  # Others
  - GEOIP,CN,ğŸ‡¨ğŸ‡³ CHINA-IP
  - MATCH,DIRECT
