# BacktoCN
port: 7890
socks-port: 7891
allow-lan: true
mode: Rule
log-level: info
external-controller: 127.0.0.1:9090
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: redir-host
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - localhost.ptlogin2.qq.com
  nameserver:
    - 223.5.5.5
    - 180.76.76.76
    - 119.29.29.29
    - 117.50.10.10
    - 114.114.114.114
  fallback:
    - 8.8.8.8
    - 1.1.1.1
    - tls://dns.rubyfish.cn:853
    - tls://1.0.0.1:853
    - tls://dns.google:853
    - https://dns.rubyfish.cn/dns-query
    - https://cloudflare-dns.com/dns-query
    - https://dns.google/dns-query
  fallback-filter:
    geoip: false
    ipcidr:
      - 240.0.0.0/4
proxies:
  - {name: CN 1, server: 14.29.124.168, port: 25207, type: ss, cipher: aes-128-cfb, password: QazEdcTgb159@$*, udp: true}
  - {name: CN 2, server: 14.29.124.168, port: 25268, type: ss, cipher: aes-128-cfb, password: QazEdcTgb159@$*, udp: true}
  - {name: CN 3, server: 119.36.161.40, port: 443, type: trojan, password: 0af4b7c0-0fc3-11ed-bbbb-1239d0255272, sni: trojan3.udpgw.com, skip-cert-verify: true, udp: true}
  - {name: TH 1, server: 119.59.116.248, port: 17159, type: trojan, password: PHnvNV7HGp, skip-cert-verify: true, udp: true}
  - {name: TW 1, server: a.sp.hideu.tw, port: 10629, type: ssr, cipher: dummy, password: .hideu0430., protocol: auth_chain_a, obfs: plain, protocol-param: 139242:c6YW3v, obfs-param: "", udp: true}
  - {name: TW 2, server: a.kr.hideu.tw, port: 10629, type: ssr, cipher: dummy, password: .hideu0430., protocol: auth_chain_a, obfs: plain, protocol-param: 139242:c6YW3v, obfs-param: "", udp: true}
  - {name: IN 1, server: in-01.licom.ml, port: 8443, type: trojan, password: ce433528-39fa-4711-bc0d-25a5b1579574, skip-cert-verify: true, udp: true}
  - {name: IN 2, server: jgwhdlb3.gaox.ml, port: 443, type: trojan, password: 006baa3f-4bc3-4915-b60d-c8c5dae11a11, skip-cert-verify: true, udp: true}
  - {name: IN 3, server: jgwhdlb2.gaox.ml, port: 443, type: trojan, password: 54080134-2cba-4535-8599-95650bd9aa54, skip-cert-verify: true, udp: true}
  - {name: IN 4, server: jgwhdlb1.gaox.ml, port: 443, type: trojan, password: e05c749b-7c6b-41b8-9c71-9dcf685edf4a, skip-cert-verify: true, udp: true}
 
proxy-groups:
  - name: PROXY
    type: select
    proxies:
     - GLOBAL-CONNECT
     - AUTOMATIC
     - CN 1
     - CN 2
     - CN 3
     - TW 1
     - TW 2
     - IN 1
     - IN 2
     - IN 3
     - IN 4
  - name: AUTOMATIC
    type: url-test
    url: https://www.google.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
     - CN 1
     - CN 2
     - CN 3
     - TW 1
     - TW 2
     - IN 1
     - IN 2
     - IN 3
     - IN 4
  - name: AUTO-FALLBACK
    type: fallback
    url: https://www.google.com/generate_204
    interval: 300
    tolerance: 50
    proxies:
     - CN 1
     - CN 2
     - CN 3
     - TW 1
     - TW 2
     - IN 1
     - IN 2
     - IN 3
     - IN 4
  - name: CHINA
    type: url-test
    url: https://www.google.com/generate_204
    interval: 300
    proxies:
     - CN 1
     - CN 2
     - CN 3
  - name: ASIA
    type: url-test
    url: https://www.google.com/generate_204
    interval: 300
    proxies:
     - TW 1
     - TW 2
     - IN 1
     - IN 2
     - IN 3
     - IN 4
  - name: XIAOMI
    type: select
    proxies:
      - AUTO-FALLBACK
      - AUTOMATIC
      - PROXY
      - CHINA
      - ASIA
      - GLOBAL-CONNECT
  - name: CHINA-MUSIC
    type: select
    proxies:
      - AUTO-FALLBACK
      - AUTOMATIC
      - PROXY
      - CHINA
      - ASIA
      - GLOBAL-CONNECT
  - name: CHINA-IP
    type: select
    proxies:
      - GLOBAL-CONNECT
      - AUTO-FALLBACK
      - AUTOMATIC
      - PROXY
      - CHINA
      - ASIA
  - name: GLOBAL-CONNECT
    type: select
    proxies:
      - DIRECT
      - REJECT
rules:
  # XIAOMI
  - DOMAIN-KEYWORD,xiaomi,XIAOMI
  - DOMAIN-SUFFIX,mi.com,XIAOMI
  - DOMAIN-SUFFIX,xiaomi.com,XIAOMI
  - DOMAIN-SUFFIX,xiaomi.net,XIAOMI
  - DOMAIN-SUFFIX,xiaomi.cn,XIAOMI
  - DOMAIN-SUFFIX,xiaomicp.com,XIAOMI
  - DOMAIN-SUFFIX,miwifi.com,XIAOMI
  - DOMAIN-SUFFIX,iotcplatform.com,XIAOMI
  
  # CHINA-MUSIC
  - DOMAIN-SUFFIX,126.net,CHINA-MUSIC
  - DOMAIN-SUFFIX,music.163.com,CHINA-MUSIC
  - DOMAIN-SUFFIX,music.qq.com,CHINA-MUSIC
  - DOMAIN-SUFFIX,tc.qq.com,CHINA-MUSIC
  
  # Others
  - GEOIP,CN,CHINA-IP
  - MATCH,GLOBAL-CONNECT
